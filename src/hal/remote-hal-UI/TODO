---- proto doc changes:

add MT_HALRCOMP_ERROR:
    subscribe to nonexistant component
    subscribe to wrong type
    publish on [wrong compname, message]


--------------
hal API rework:
    checks in acquire, release - check for owner pid existing!
    allow acquire if acquired and pid doesnt exist -> restart after crash

--------------
halext rework:

   # this should be fixed in halext so pin objects
    # of a comp are accessible as a dict, not just
    # its values

    change from value access to pin access or introduce pin dict
----

make it 2 separate protos, separate timeouts


states: offline, cmd_ok, update_ok, 2way

bind_done


cmd channel:
	startup:
	    status = down


	rewind timer on send, receive
	set ping.outstanding = false

	on tick -> send ping
	   if ping.outstanding = True:
	      ---> set down

	on ping receive:
	      ---> set up
	      rewind timer

	set ping.outstaning = True




halserver:
	   publish live updates
	   (re) arm timer on subscribe, update

2 states -> 4 colors, 2 timers
	 red amber yellow green
	 make it a status widget


activate signal once cmd channel ok:
	 associate with grid, vbox, hbox

grey out on un linked ?




halext:


not essential: bind count field
eps references
waitacquired - new halcmd
support list of comps on wait*
timing value for rcomps





ain()
  File "/home/mah/linuxcnc/bin/gladevcp", line 236, in main
    halcomp = GRemoteComponent(opts.component,cmd_uri,update_uri, builder)
  File "/home/mah/linuxcnc/lib/python/hal_glib.py", line 163, in __init__
    print "----imports: ",sys.modules.keys()
NameError: global name 'sys' is not defined
mah@wheezy:~/linuxcnc/src/hal/remote-hal-UI$ gladevcp -c gladevcp -u gladevcpdemo.py -z 127.0.0.1 gladevcpdemo.ui
----imports:  ['heapq', 'google.protobuf.internal.encoder', 'gladevcp.hal_gremlin', 'gladevcp.hal_meter', 'functools', 'random', 'cffi', 'ctypes.re', 'rs274.math', 'subprocess', 'sysconfig', 'cffi.pycparser', '__future__', 'gc', 'rs274.glnav', 'gtk.gdkgl.gtk', 'glnav', 'ctypes._endian', 'encodings.encodings', 'gladevcp.locale', 'google.protobuf.reflection', 'gtk.gtkgl.gobject', 'pyczmq.pyczmq', 'hal', 'struct', 'cffi._cffi_backend', 'tempfile', 'test_pb2', 'gobject._gobject', 'value_pb2', 'google.protobuf.internal.wire_format', 'imp', 'pycparser.ply.os', 'collections', 'cffi.ffiplatform', 'cffi.thread', 'gtk.glade', 'pyczmq.zctx', 'gtk.gtkgl', 'pycparser.ply.copy', 'zipimport', 'gobject.sys', 'string', 'pyczmq.zloop', 'pycparser.subprocess', 'google.protobuf.message', 'cffi.api', 'rs274.Tkinter', 'cffi.cStringIO', 'encodings.utf_8', 'gtk.gdkgl', 'google.protobuf.google', 'datetime', 'cffi.os', 'pyczmq.types', 'gladevcp.time', 'gladevcp.sys', 'rs274.sys', 'google.protobuf.internal.struct', 'pango', 'ctypes.os', 'gladevcp.hal_glib', 'gladevcp.re', 'gtk._lazyutils', 'pycparser.sys', 'gladevcp.gtk', 'signal', 'gladevcp.gremlin_view', 'gtk.gtkgl.widget', 'gladevcp.hashlib', 'gobject.propertyhelper', 'gtk.os', 'google.protobuf.internal.message_listener', 'pyczmq._cffi', '_togl', 'canon_pb2', 'google.protobuf.re', 'dis', 'gladevcp.hal_filechooser', 'cStringIO', 'nanopb_pb2', 'google', 'pyczmq.zpoller', 'gobject.gobject', 'gladevcp.hal_mdihistory', 'locale', 'cairo', 'google.protobuf.internal.weakref', 'gladevcp.hal_sourceview', 'gladevcp.__future__', 'gladevcp.gtksourceview2', 'ctypes.errno', 'cffi.re', 'pycparser.c_parser', 'gtk.gdkgl.ext', 'encodings', 'gladevcp.hal_pythonplugin', 'rs274._togl', 'array', 'gladevcp.hal_widgets', 'rs274.OpenGLTk', 'gtk.gobject', 'gladevcp.gettext', 'google.protobuf.collections', 'abc', '_tkinter', 'pyczmq.cffi', 'gladevcp.tempfile', 'gladevcp', 'ctypes.util', 'token', 'cffi.model', 'google.protobuf.internal.python_message', 're', 'gio.gobject', 'gladevcp.hal', 'rs274.array', 'gtk.gdkgl._gdkgl', 'pycparser.ply.types', 'rtapi_message_pb2', 'math', 'google.protobuf.internal', 'fcntl', 'gremlin', 'gladevcp.led', 'Tkinter', 'gladevcp.pyngcgui', 'rs274.gcode', 'ctypes.tempfile', 'optparse', 'UserDict', 'gtk.sys', 'inspect', 'gladevcp.rs274', '_ctypes', 'google.protobuf.descriptor', 'fnmatch', '_hal', 'ctypes', 'pygtk', 'ctypes.struct', 'codecs', 'linuxcnc', 'glib.optparse', '_sysconfigdata_nd', 'gladevcp.iconview', 'gladevcp.hal_actions', 'cffi.sys', '_functools', 'gtk.warnings', '_locale', 'google.protobuf.internal.cStringIO', 'thread', 'pycparser.ast_transforms', 'traceback', 'atk', 'pycparser.c_ast', 'gladevcp.gladevcp', 'weakref', 'itertools', 'google.protobuf.cStringIO', 'gobject.glib', 'pyczmq.zauth', 'glib.sys', 'getopt', 'gladevcp.hal_graph', 'glib._glib', 'os', 'marshal', 'glib.option', 'gtk', 'gladevcp.offsetpage_widget', 'pyczmq', 'cairo._cairo', '_sre', 'gladevcp.cairo', 'ctypes.ctypes', 'pycparser', 'gtk.gdk', '__builtin__', 'gladevcp.math', 'gladevcp.xembed', 'gtk.gtkgl.gtk', 'pyczmq.os', 'google.protobuf.internal.containers', 'gladevcp.atexit', 'operator', 'pycparser.re', 'gladevcp.string', 'select', 'ctypes._ctypes', '_heapq', 'ctypes.sys', 'pycparser.ply.yacc', 'gladevcp.hal_pyngcgui', 'posixpath', 'pycparser.ply.sys', 'gladevcp.pango', 'errno', 'gladevcp.drowidget', 'binascii', 'pyczmq.zframe', 'pyczmq.zstr', 'sre_constants', 'gio.unix', 'encodings.latin_1', 'os.path', 'tokenize', 'gio', 'gremlin_view', 'gladevcp.select', '_warnings', 'gladevcp.calculatorwidget', 'glib', 'log_pb2', 'hershey', 'encodings.__builtin__', 'gladevcp.os', 'object_pb2', 'glib.glib', 'gladevcp.getopt', '_codecs', 'pyczmq.zbeacon', 'cffi.types', 'task_pb2', 'gladevcp.gcode', 'gtk._gtk', '_collections', '_cffi_backend', 'pycparser.yacctab', 'google.protobuf.text_format', 'copy', 'pwd', 'pyczmq.zsocket', '_sysconfigdata', '_struct', 'hashlib', 'cffi.ctypes', 'pyczmq.inspect', 'keyword', 'atexit', 'pangocairo', 'gladevcp.offsetwidget', 'minigl', 'pycparser.ply.lex', 'gladevcp.gremlin', 'posix', 'encodings.aliases', 'exceptions', 'sre_parse', 'pickle', 'rs274.rs274', 'rs274.minigl', 'popupkeyboard', 'pycparser.ply.pycparser', 'gladevcp.linuxcnc', 'copy_reg', 'sre_compile', 'gladevcp.tooledit_widget', '_hashlib', '_random', 'gobject.constants', 'pycparser.ply', 'pyczmq.zmq', 'site', 'rs274.interpret', 'rs274.hershey', 'gladevcp.collections', 'google.protobuf.internal.os', 'rs274.glcanon', 'io', '__main__', 'pycparser.plyparser', 'google.protobuf.descriptor_pb2', 'shutil', 'emcclass_pb2', 'cffi.weakref', 'cffi.commontypes', 'rs274.os', 'gladevcp.hal_gremlin_plus', 'gladevcp.makepins', 'strop', 'grp', 'linecache', 'gobject.option', 'pyczmq.zcert', 'google.protobuf.internal.google', 'encodings.codecs', 'gettext', 'google.protobuf', 'pyczmq.zcertstore', 'gtk.gdkgl.gobject', '_abcoll', 'rs274.linuxcnc', 'pyczmq.functools', 'gcode', 'opcode', 'gladevcp.shutil', 'gtk.gtkgl._gtkgl', 'halupdate_pb2', 'gladevcp.hal_bar', 'genericpath', 'stat', 'pycparser.ply.hashlib', 'motcmds_pb2', 'warnings', 'cffi.cparser', 'glob', 'message_pb2', 'google.protobuf.internal.type_checkers', 'textwrap', 'sys', 'rs274', 'gtk.deprecation', 'gio._gio', 'types', 'pyczmq.zmsg', 'gladevcp.gladebuilder', 'pycparser.c_lexer', 'sitecustomize', 'pycparser.lextab', 'gladevcp.gobject', 'gtk.types', 'gtksourceview2', '_weakref', 'pycparser.ply.re', 'Tkconstants', 'pyczmq.__future__', '_io', '_weakrefset', 'google.protobuf.internal.api_implementation', 'pyngcgui', 'hal_glib', 'time', 'gobject', 'gtk.gtk', 'types_pb2', 'google.protobuf.internal.decoder']
----- <GRemoteComponent object at 0xa6a461c (GRemoteComponent at 0xa6d90b0)>
setup for halserver 127.0.0.1
